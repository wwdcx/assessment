@{
    ViewData["Title"] = "Home Page";
}

@* <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
 *@
    <section class="vh-100" style="background-color: none;">
        <div class="container h-100">
            <div class="row d-flex justify-content-center align-items-center h-100">
                <div class="col-lg-12 col-xl-11">
                    <div class="text-black" style="border-radius: 25px;">
                        <div class="card-body">
                            <div class="row justify-content-center">
                                <div class="col-md-10 col-lg-6 col-xl-5 order-2 order-lg-1">

                                    <p class="text-center h1 fw-bold mb-5 mx-1 mx-md-4 mt-4">Registration</p>

                                    <form class="mx-1 mx-md-4">

                                        <div class="d-flex flex-row align-items-center mb-4">
                                            <i class="fas fa-user fa-lg me-3 fa-fw"></i>
                                            <div data-mdb-input-init class="form-outline flex-fill mb-0">
                                                <label class="form-label" for="user-name">Name</label>
                                                <input type="text" id="user-name" class="form-control" />
                                            </div>
                                        </div>

                                        <div class="d-flex flex-row align-items-center mb-4">
                                            <i class="fas fa-envelope fa-lg me-3 fa-fw"></i>
                                            <div data-mdb-input-init class="form-outline flex-fill mb-0">
                                                <label class="form-label" for="user-email">Email</label>
                                                <input type="email" id="user-email" class="form-control" />
                                            </div>
                                        </div>

                                        <div class="d-flex flex-row align-items-center mb-4">
                                            <i class="fas fa-lock fa-lg me-3 fa-fw"></i>
                                            <div data-mdb-input-init class="form-outline flex-fill mb-0">
                                                <label class="form-label" for="user-phone-number">Phone Number</label>
                                                <input type="text" id="user-phone-number" class="form-control" />
                                            </div>
                                        </div>

                                        <div class="d-flex flex-row align-items-center mb-4">
                                            <i class="fas fa-key fa-lg me-3 fa-fw"></i>
                                            <div data-mdb-input-init class="form-outline flex-fill mb-0">
                                                <label class="form-label" for="user-hobby">Hobby</label>
                                                <input type="text" id="user-hobby" class="form-control" placeholder="Ex. jogging, cooking..." />
                                            </div>
                                        </div>

                                        <div class="d-flex flex-row align-items-center mb-4">
                                            <i class="fas fa-key fa-lg me-3 fa-fw"></i>
                                            <div data-mdb-input-init class="form-outline flex-fill mb-0">
                                                <label class="form-label" for="user-skillset">Skill Sets</label>
                                                <input type="text" id="user-skillset" class="form-control" placeholder="Ex. time management, problem solving..." />
                                            </div>
                                        </div>

                                        <div class="d-flex justify-content-center mx-4 mb-3 mb-lg-4">
                                            <button type="button" id="btn-register" data-mdb-button-init data-mdb-ripple-init class="btn btn-primary btn-lg">Register</button>&nbsp;&nbsp
                                            <button type="button" id="btn-users-list" data-mdb-button-init data-mdb-ripple-init class="btn btn-primary btn-lg" onclick="GoListPage()">View List</button>
                                        </div>

                                        <div style="color:orange;" id="warningMessage">
                                        </div>

                                        <div style="color:lightgreen;" id="successMessage">
                                        </div>
                                    </form>

                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

<script>
    function GoListPage() {
        window.location.href = '/Home/UserListPage';
    }

    function showErrMessage(err_msg) {
        $('#warningMessage').html('<b>' + err_msg + '</b>');
        $('#warningMessage').show();
    }

    function Register(){
        var name = $('#user-name');
        var email = $('#user-email');
        var phone_number = $('#user-phone-number');
        var hobbies = $('#user-hobby');
        var skillsets = $('#user-skillset');

        if (name.val() == '') {
            name.focus();
            showErrMessage('Name is required');
            return false;
        }

        if (email.val() == '') {
            email.focus();
            showErrMessage('Email is required');
            return false;
        }

        if (phone_number.val() == '') {
            phone_number.focus();
            showErrMessage('Phone number is required');
            return false;
        }

        var arr_skill_sets = [];
        if (skillsets.val() != null && skillsets.val() != '') {
            arr_skill_sets = skillsets.val().split(',');
        }

        var arr_hobbies = [];
        if (hobbies.val() != null && hobbies.val() != '') {
            arr_hobbies = hobbies.val().split(',');
        }

        var obj = {
            UserName: name.val(),
            Mail : email.val(),
            PhoneNumber : phone_number.val(),
            SkillSets : arr_skill_sets,
            Hobby : arr_hobbies
        }

        var params = JSON.stringify(obj);

        $.ajax({
            type : 'POST',
            dataType : 'json',
            url: '/api/User/Registration',
            data : params,
            contentType : 'application/json; charset=utf-8',
            success: function (result) {
                console.log(result);
                if (result.ReturnCode == 200) {
                    $('#successMessage').html('<b>Success register</b>');
                    $('#successMessage').show();
                    ClearForm();
                } else {
                    showErrMessage(result.ReturnMessage);
                }
            },
            error: function (result) {
                console.log(result);
            }
        });

    }

    function ClearForm() {
        $('input#user-name').val('');
        $('input#user-email').val('');
        $('input#user-phone-number').val('');
        $('input#user-hobby').val('');
        $('input#user-skillset').val('');
        $('#btn-save').attr('itemid', '');
    }

    $(document).ready(function () {
        $('#warningMessage').hide();
        $('#successMessage').hide();

        $('#btn-register').click(function () {
            $('#warningMessage').hide();
            $('#successMessage').hide();
            Register();
        });
    });

</script>
